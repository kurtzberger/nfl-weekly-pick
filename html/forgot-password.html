<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
    <meta name="description" content="Weekly Pick 'em">
    <meta name="author" content="Eric Kurtzberg">
    <title>Weekly Pick 'em Reset Password Page</title>
    <!--Import Google Icon Font and Custom Icons-->
	<link href="https://rawgit.com/Templarian/MaterialDesign-Webfont/master/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css" media="screen,projection">
	<link rel="stylesheet" type="text/css" href="../css/main.css">
</head>

<body>	
	<nav class="top-nav deep-orange darken-4">
		<a id="title" class="brand-logo center"></a>
		<a href="#!" data-activates="menu-nav" class="button-collapse show-on-large" style="transform: translateX(0px);"><i class="mdi mdi-menu"></i></a>
		<ul id="menu-nav" class="side-nav orange lighten-5">
			<li class="no-padding">
				<ul class="collapsible collapsible-accordion">
					<li id="league-picks-li">
						<a class="collapsible-header waves-effect"><i class="mdi mdi-football"></i><b>League Picks</b></a>
						<div class="collapsible-body white" style="display: block;">
							<ul id="weeks-list"></ul>
						</div>
					</li>
				</ul>
			</li>
			<li id="standings-li">
				<a id="standings-link" class="waves-effect"><i class="mdi mdi-format-list-numbers left"></i><b>Standings</b></a>
			</li>
            <li id="user-picks-li">
            	<a id="user-picks-link" class="waves-effect"><i class="mdi mdi-checkbox-marked-circle left"></i><b>Your Picks</b></a>
            </li>
			<li id="register-li">
				<a id="register-link" class="waves-effect"><i class="mdi mdi-pencil left"></i><b>Register</b></a>
			</li>
			<li id="login-li">
				<a id="login-logoff" class="waves-effect deep-orange lighten-3"><i class="mdi mdi-account left"></i><b>Login</b></a>
			</li>
		</ul>
	</nav>	
	
	<!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
	<!--Firebase import-->
	<script src="https://www.gstatic.com/firebasejs/3.0.0/firebase.js"></script>
	<script type="text/javascript" src="../js/init.js"></script>
	<script type="text/javascript" src="../js/links.js"></script>
	<script>
		$(document).ready(function()
		{	
			$("#title").text("Forgot Password");
			$("#reset-div").click(function()
			{
				$(this).html('<div class="s12 m4 center">' +
					'<div class="preloader-wrapper big active">' +
					'<div class="spinner-layer spinner-blue-only">' +
					'<div class="circle-clipper left">' +
					'<div class="circle"></div>' +
					'</div><div class="gap-patch">' +
					'<div class="circle"></div>' + 
					'</div><div class="circle-clipper right">' +
					'<div class="circle"></div></div></div></div></div>');
				 
				setTimeout(function()
				{ 
					firebase.auth().sendPasswordResetEmail($('#email').val()).then(function()
					{
						Materialize.toast('Email sent!');
						window.location.href = "login.html";
					}, function(error)
					{
						Materialize.toast('Error: ' + error.message, 6000, "red darken-1"); // 4000 is the duration  of the toast in milliseconds
						$('#reset-div').html('<a id="reset-password-button" class="btn waves-effect waves-light blue-grey lighten-1 col s2 offset-s5">Reset Password</a>');
					});
				}, 1000);
			});
		});
	</script>
	
		<div id="main-content" class="container">
		<div id="reset-password" style="padding-top:50px;">
			<div class="row">
				<div class="input-field col s8 push-s2"> 
					<i class="mdi mdi-account-circle prefix"></i>
					<input id="email" type="email"> 
					<label for="email">Email</label>
				</div>
			</div>
			<div class="row center-align">
				<p>An email will be sent to you with reset password link</p>
			</div>
			<div class="row" id="reset-div">
				<a id="reset-password-button" class="btn waves-effect waves-light blue-grey lighten-1 col s2 offset-s5">Reset Password</a>
			</div>
		</div>
	</div>
	
	
</body>
</html>
